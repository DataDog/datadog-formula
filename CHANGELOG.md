# Changes

## 3.0

**This role will install Agent v7 by default.** Datadog Agent v7 runs checks with Python 3, so if you were running any custom checks written in Python, they must be compatible with Python 3. If you were not running any custom checks or if your custom checks are already compatible with Python 3, then it is safe to upgrade to Agent v7.

This release contains breaking changes to the pillar file structure. Please read the `README` file, in particular the `Pillar configuration`, as well as the [pillar example file](pillar.example) for details on how to write your pillar file.

* [FEATURE] Add Agent v7 support [#40][]
* [FEATURE] Allow all `datadog.yaml` config options for Agent v6 and v7 [#35][]
* [FEATURE] Add ability to choose check versions [#37][]
* [BUGFIX] Put check config files in the `<check>.d/` directory on Agent v6 and v7 [#39][]
* [BUGFIX] Fix Agent v6 and v7 install from beta repositories [#42][]
* [BUGFIX] Fix checks config directory permissions [#45][]
* [OTHER] Testing docs & scripts improvements [#44]
* [OTHER] Do not import the old rpm GPG key if installing Agent v7 [#43][]
* [OTHER] Unused variable cleanup [#36][]

## 2.1 / 2019-08-27

* [FEATURE] Add python_version option [#33][]
* [FEATURE] Add site option [#32][]
* [BUGFIX] Retry on failure when pulling the gpg key from keyserver.ubuntu.com [#28][]
* [OTHER] Trust the new rpm gpg key on RHEL [#31][]
* [OTHER] Use the long apt key fingerprint [#30][]

## 2.0 / 2018-07-05

* Add support for Agent 6.
* Add option to specify which version of the Agent to install (installs the latest version of Agent 6 by default).
* Add CentOS testing environment, with the ability to specify which testing environment you want to spin up.

## 1.2 / 2018-06-05

* Make datadog.checks optional, see [#22][].

## 1.1 / 2018-03-05

* Trust the new GPG key in the APT repository, see [#20][].

## 1.0 / 2018-02-20

* Refactor the formula using a map.
* Added a Docker compose file to ease development.
* Added uninstall state.
* Watch config file for changes, see [#17][].
* Configure checks, see [#18][].

<!--- The following link definition list is generated by PimpMyChangelog --->
[#17]: https://github.com/DataDog/datadog-formula/issues/17
[#18]: https://github.com/DataDog/datadog-formula/issues/18
[#20]: https://github.com/DataDog/datadog-formula/issues/20
[#22]: https://github.com/DataDog/datadog-formula/issues/22
[#28]: https://github.com/DataDog/datadog-formula/issues/28
[#30]: https://github.com/DataDog/datadog-formula/issues/30
[#31]: https://github.com/DataDog/datadog-formula/issues/31
[#32]: https://github.com/DataDog/datadog-formula/issues/32
[#33]: https://github.com/DataDog/datadog-formula/issues/33
[#35]: https://github.com/DataDog/datadog-formula/issues/35
[#36]: https://github.com/DataDog/datadog-formula/issues/36
[#37]: https://github.com/DataDog/datadog-formula/issues/37
[#39]: https://github.com/DataDog/datadog-formula/issues/39
[#40]: https://github.com/DataDog/datadog-formula/issues/40
[#42]: https://github.com/DataDog/datadog-formula/issues/42
[#43]: https://github.com/DataDog/datadog-formula/issues/43
[#45]: https://github.com/DataDog/datadog-formula/issues/45